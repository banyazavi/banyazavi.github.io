---
title: 네트워크 관리
key: post-2019-07-14-01
categories: 
  - 공유기 설정 뜯어보기
tags:
  - 홈 네트워크
  - SOHO
  - 공유기
  - ipTIME
---

> 일반적으로는 건드릴 필요가 거의 없는 부분이다

<!--more-->

# 뜯어보기 전에
`네트워크 관리` 메뉴는 ipTIME 공유기의 가장 기본이 되는 네트워크 설정이다.

따라서 크게 건드릴 필요가 없는 부분이지만, 나중의 고급 설정을 위해 알아봐 두기만 하자.

# 인터넷 설정 정보
![Image Alt 인터넷 설정 정보]({{"/assets/images/2019-07-14/2019-07-14-01-01.png"| relative_url}})  
인터넷 설정 정보 화면. 외부 IP 주소와 기본 게이트웨이, WAN MAC 주소는 개인정보 상 삭제하였다.

공유기가 연결되어 있는 인터넷 회선에 관한 설정이다.

## 인터넷 연결 방식
- `동적 IP 방식`: 기본 설정으로, 대부분의 인터넷 환경에 해당한다.
- `PPPoE`: ADSL 등 전화선 기반의 모뎀에서 사용하는 방식이다. 현재는 거의 사용할 일이 없으니 잊어버려도 좋다.
- `고정 IP 방식`: 서버 운영 등의 이유로 인터넷 회선 가입 시 고정 IP를 할당받은 경우, 또는 회사 인트라넷에서 공유기를 사용하는 등의 상황으로 고정 IP를 할당해야 하는 경우 해당 옵션을 선택하고 아래 내용을 수동으로 설정할 수 있다.

여기서 뭔가를 건드린다면 보통 위 설정보다는 아래의 `DNS 주소 수동 입력`과 `WAN MAC 주소`를 주로 만지게 될 것이다.

## DNS 주소 수동 입력
인터넷상의 도메인과 IP 주소를 매치시키는 `DNS`<sup>Domain Name System</sup>정보를 제공하는 서버를 등록하는 부분이다.

일반적으로 인터넷 사업자가 제공하는 자사의 DNS 서버를 쓰게 되는데, DNS 서버를 이용하는 사이트 차단 등을 우회하려는 경우 이 정보를 바꾸게 된다.

국내외 DNS 서버 목록은 인터넷에서 쉽게 구할 수 있으니, 원한다면 주소를 바꿔봐도 좋다. [#나무위키: DNS > DNS 서버 목록](https://namu.wiki/w/DNS#s-3){: target="_blank"}

DNS 수동 입력 시 잘못된 주소를 등록하였을 경우 인터넷이 되지 않으니, 기존 주소를 백업해 두거나 수동 입력을 해제하여 기본 제공 주소를 다시 받아오자.

## WAN MAC 주소
모든 네트워크 장비에는 `MAC`<sup>Media Access Control</sup> 주소라고 하는 값이 할당되어 있다. 일종의 네트워크 기기 시리얼 넘버라고 볼 수 있는데, 네트워크 상에서 이 정보를 기반으로 IP 주소를 할당하고 통신을 수행하게 된다.

자세한 내용은 네트워크 전공 서적을 참고하도록 하고, 우리에게 중요한 내용은 ***인터넷 서비스 사업자가 이 값을 기준으로 IP를 할당한다는 것***이다. 즉, ***이 값을 바꾸면 공유기의 공인 IP가 바뀌게 된다.***

대부분의 경우 인터넷의 공인 IP는 동적 IP 방식으로 주기적으로 IP가 바뀌기는 하지만, 이 주기 이전에 공인 IP의 변경이 필요한 경우―IP를 차단 당했다거나(!)― 이 값을 변경하면면네트워크에서는 새로운 장비로 인식하기 떄문에, 새롭게 IP 재할당을 받을 수 있다.

다만 같은 라우터가 관리하는 네트워크 안에 MAC 주소가 같은 장비가 존재하면, 그 때부터 통신이 꼬이게 되니―이를 악용하는 것이 `SRP 스푸핑`이라고 하는 해킹 기법이다!― 가능하면 겹치지 않을 값을 넣도록 하자. 이 공유기를 통해 접속하는 하위 장비―PC나 스마트폰 등―의 MAC 주소를 사용하는 방법이 이 있다.

# 내부 네트워크 설정
![Image Alt 내부 네트워크 설정]({{"/assets/images/2019-07-14/2019-07-14-01-02.png"| relative_url}})  
내부 네트워크 설정 화면. 가이드를 위해 세팅된 공유기이므로, 사용중인 IP 주소 정보가 전혀 없다.

이 곳에서는 한 가지 설정을 바꿔주면 좋다. 필수는 전혀 아니다. 그것은 바로 내부 IP 주소의 네트워크 대역을 바꿔주는 것이다.

## 내부 IP 주소
ipTIME의 공유기 기본 내부 네트워크 대역은 192.168.0.0 - 192.168.0.255을 사용하고, 공유기는 여기서 192.168.0.1번의 주소를 가져간다.

사실 이 주소에 전혀 문제는 없지만 이 주소를 바꾸는 것을 권장하는 이유는 다름이 아니고 ***ipTIME을 비롯한 대부분의 공유기가 이 대역을 사용하고 있기 때문***이다.

상술했듯이 어차피 사설 IP 대역이기 떄문에 이 주소대역이 빈번하게 사용되는 것에 문제는 없지만, VPN이나 공유기 하위에 공유기를 설치하게 될 경우, 엮이게 되는 두 네트워크의 내부 네트워크 대역이 일치하게 되어 혼선이 발생하게 된다.

해당 기능을 사용한다면 이 설정을 조정하여 두 공유기의 내부 내트워크 대역을 다르게 바꾸도록 하자. 개인이 사용할 수 있는 사설 IP는 범위가 제한되어 있기 때문에 아래 사설 IP 대역 안에서 설정하여야 한다. [#나무위키: 사설 IP > 사설 IP 대역](https://namu.wiki/w/%EC%82%AC%EC%84%A4%20IP#s-3){: target="_blank"}


>* 사설 IP 대역
  - 10.0.0.0 - 10.255.255.255
  - 172.16.0.0 - 172.31.255.255
  - 192.168.0.0 - 192.168.255.255

# DHCP 서버 설정
![Image Alt DHCP 서버 설정]({{"/assets/images/2019-07-14/2019-07-14-01-03.png"| relative_url}})  
DHCP 서버 설정 화면이다. 등록된 기기들의 MAC 주소를 보면 알겠지만, 가이드를 위해 임의로 구성된 환경이다.

이 화면에서는 공유기가 관리하는 내부 네트워크의 환경과 접속하는 장비들에 대한 설정을 할 수 있다. 주로 공인된 장비에 IP를 고정 할당하기 위해 주로 쓰게 될 것이다. 여기서 IP를 고정 할당해야 후에 서버 등을 위해 활용할 포트포워딩 같은 작업을 진행할 수 있다.

## DHCP 서버 설정
`DHCP`<sup>Dynamic Host Configuration Protocol</sup>는 네트워크를 사용하는 장비에게 공유기가 IP를 할당해주는 방법을 의미한다. 기본적으로 공유기는 DHCP 서버의 역할을 하며 연결된 기기들에게 이 방법으로 IP를 제공한다.

그래서 이 설정을 중지해야 되는 상황은 그리 많지 않다. 가장 일반적인 경우가 공유기가 2대 이상 존재하는 네트워크 환경에서 WIndows의 홈 네트워크를 구성할 때이다. 두 공유기가 각자 IP를 할당하면 다른 네트워크로 인식하여 홈 네트워크가 구성되지 않기 때문이다!

그 경우에는 하위 공유기의 내부 네트워크 설정 화면에서 IP를 상위 공유기가 할당하는 IP주소 대여 범위 안으로 설정하고, DHCP 서버 동작 기능을 중지하여 하위 공유기를 마치 허브와 같이 동작하게 하면 된다.

두 개 이상의 공유기가 동작하는 환경―예를 들면 사무실이 굉장히 넓다거나, 복층이거나 하여 와이파이 신호의 확장이 필요한 경우―에 대한 종합적인 공유기 설정 가이드는 작성 예정에 있다.

## IP 주소 대여 범위
이 설정은 말 그대로 해당 공유기가 할당해 주는 IP의 범위를 지정하는 옵션이다. 서브넷 마스크의 설정을 **255.255.255.0**의 기본 설정에서 변경하지 않았다면 이 공유기가 사용 가능한 주소는 마지막 4번쨰 자리가 0 - 255이다.

그러나 모든 주소를 대여해줄 수는 없다. **x.x.x.0번 주소는 해당 네트워크 자체를 의미**하고, **x.x.x.255번 주소는 해당 네트워크의 모든 기기에게 신호를 보내기 위해 예약**된 주소이다. 그리고 일반적으로 **x.x.x.1번 주소는 공유기 자체의 주소**를 의미―물론, 이 주소는 내부 네트워크 설정에서 바꿀 수 있다!―하므로 일반적으로 이 세 주소를 제외하고 할당하게 된다.

타사 공유기의 경우, 이 범위 외의 주소여도 아래 DHCP 주소 등록을 통해 할당할 수 있다. 이를 활용하여 IP주소 대여 범위를 줄이고, 대여 범위 바깥의 IP를 고정 할당 주소나 관리용 IP(공유기에 접속하는 것이 허용된 특별 IP, 높은 공유기 보안 수준이 필요할 경우 고려할 만하다.)를 할당하는 등의 방법을 쓸 수 있는데, ipTIME 공유기는 그 방법이 지원되지 않으므로, ***그냥 기본 값으로 두자.***

## IP 주소 대여 시간
IP주소를 대여하고 이를 갱신하는 시간을 지정할 수 있다. 기본값을 2시간인데, 간혹 PC의 DHCP 갱신 설정 오류 등으로 네트워크가 주기적으로 끊긴다거나 하면 이를 길게 늘려 잡아 해결하는 방법이 있다. ***물론 이는 미봉책으로 장비 설정을 확인하여 오류를 해결하는 것이 원칙이다!***

카페의 매장 등 공유기에 접속하는 유동인구가 매우 많을 경우, ***이 값을 짧게 설정하여 매장을 떠난 손님의 IP를 공유기가 빠르게 회수***할 수 있도록 하자. 이전의 공유기 수리 사례중에 이 값이 **32비트 정수 최대치(21억 초!)로 설정**되어―당시 ipTIME 공유기의 설정은 대여시간을 직접 입력하는 방식이었다.― 대여할 IP가 부족하여 공유기가 제 역할을 하지 못하는 문제인 적이 있었다.

## DHCP 서버 주소관리
가장 일반적으로 사용하는 설정이 되겠다. 맨 아래의 ***수동 주소 입력 - 수동 등록 기능을 사용하여, 공유기 내에서 IP주소를 공유하여 타 기기와 연결이 필요한 장비들을 등록***하게 된다. 대표적으로 무선기능이 지원되는 프린터나, NAS 등의 서버 장비가 있다.

간혹 오래된 장비에서는 DHCP를 통한 IP할당을 지원하지 않고, 수동으로 IP를 지정해야 하는 경우가 있는데. 이 경우에도 다른 기기가 해당 IP 주소 할당을 받는 상황을 방지하기 위해 장비를 등록해 주는 것이 좋다.

장비의 MAC 주소는 해당 기기의 설정 등에서 확인하는 것이 제일 정확하나, DHCP 자동할당으로 공유기에 접속시키면 **사용중인 IP 주소 정보**에 해당 기기의 정보가 확인되므로, 이 정보를 활용―아마 해당 정보를 클릭만 해도 수동 주소 입력 화면에 자동으로 채워질 것이다!―하여 등록하는 것이 효과적이다.

이 과정을 통해 현재 연결된 정보와 다른 IP를 할당하게 된 경우, 새로운 IP 적용을 위해서 단말에서의 IP반납 - IP할당요청 명령을 수행해야 할 수도 있다.

그 방법이 귀찮거나 PC가 아니어서 수행할 수 없을 때는 공유기와 단말 장비를 모두 재부팅하는 방법을 사용하여 IP를 변경하도록 하자.

---

# 그리고 남은 이야기
사실 이 페이지는 DHCP 주소 등록을 제외하고는 무엇인가를 설정하기보다 현재 네트워크 접속 현황을 확인하기 위해 보는 경우가 많다.

이 설정을 적극적으로 수정해야 되는 상황은 보통 회사의 인트라넷 환경에서 공유기를 설치할 떄인데, 이 경우 보통은 ***네트워크 지원 부서가 있다는 의미***이므로 그 쪽에 물어보자.

국내에서 가장 흔하게 사용되는 공유기이니만큼 전산실에서도 해당 공유기에 특화된 설정을 대부분 알고 있을 가능성이 높다.
