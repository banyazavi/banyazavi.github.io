---
title: SMB 네트워크 드라이브 설정
key: post-2019-10-26-01
categories:
  - OMV4 자작 NAS 구축하기
sidebar:
  - nav: "omv4_guide"
tags:
  - NAS
  - openmediavault
  - SMB
---

> 윈도우 홈 네트워크 아래서라면 SMB보다 편한 것은 없는 것 같습니다. 네트워크 드라이브가 지원되거든요.

<!--more-->

**SMB**<sup>Server Message Block</sup>은 윈도우에서 파일이나 장치를 공유하기 위한 프로토콜입니다. 윈도우 탐색기의 네트워크에 들어가면 보이는 홈 네트워크상의 장치에 사용되는 프로토콜이라고 생각하면 될 거에요. SMB 프로토콜을 구현한 오픈 소스 소프트웨어 이름이 **Samba**인데요. 그래서인지 SMB 프로토콜 자체를 **삼바**라고 부르기도 하는 것 같네요.

아무튼 우리는 OMV의 SMB 설정을 환성화 한 후, 같은 홈 네트워크에 속한 윈도우의 **네트워크 드라이브 연결** 기능으로 연결시킬 겁니다.

---

# 호스트 이름 설정하기

**시스템 > 네트워크** 페이지에서 호스트 이름을 설정합니다. 이건 사실 SMB하고는 직접적으로 상관은 없지만, 네트워크 드라이브를 편하게 연결하기 위해 필요해요.

그리고 기본적으로 여기서 설정한 이름이 네트워크 상에서 이 나스의 이름으로 쓰이므로, 알아보기 쉽게 지정하는 것이 좋겠죠.

![호스트 이름 설정]({{"/assets/images/2019-10-26/2019-10-26-01-01.png"| relative_url}})

간단하게 **OMV4**라고 이름을 지었습니다. **도메인 이름**도 설정이 가능하긴 한데, 홈 서버 수준에서는 이것까지 설정하여 구분해야 할 이유는 별로 없습니다. **알림** 서비스를 사용하여 OMV가 메일을 보낼 것이 아니라면 도메인 이름 설정은 생략해도 괜찮습니다.

# SMB 활성화

그리고 **서비스 > SMB/CIFS** 페이지에서 서비스 활성화를 합니다.

![SMB/CIFS 서비스 활성화]({{"/assets/images/2019-10-26/2019-10-26-01-02.png"| relative_url}})

사실 이 아래에 몇 가지 설정이 더 있는데, 기본적인 사용에는 기본값에서 굳이 변경할 필요가 없으므로 스크린샷에 포함하지는 않았어요. 굳이 사용해 볼 만한 옵션이라면...

- **홈 경로 활성화**: **사용자 홈 디렉터리**를 활성화 시켰다면 이 옵션을 사용하여 사용자별 홈 폴더를 제공해 줄 수 있습니다. 소규모 사업장과 같은 곳에서 나스를 통한 개인별 백업 공간을 제공하려는 경우 유용할 수 있겠네요. 또는 가정에 여러 대의 PC를 여러 구성원이 사용할 때 개인 폴더로 활용하거나...

# 공유 폴더 추가

이제 **공유** 탭에 들어가서 아래와 같이 공유 폴더를 추가합니다. 이후에도 OMV에서 설정하는 대부분의 서비스에서 이와 같이 공유 폴더 추가하는 과정이 필요해요.

![Content 공유 추가]({{"/assets/images/2019-10-26/2019-10-26-01-03.png"| relative_url}})

만들어 둔 공유 폴더를 선택할 수 있습니다. 저는 그림과 같이 **Contents** 폴더를 공유하고, 추가적으로 **Public** 폴더도 공유하도록 할게요.

**home** 폴더는 이렇게 공유하면 안 됩니다! 앞에서 홈 경로 활성화를 해주었으면 여기서 추가하지 않아도 자연스럽게 사용자별로 제공이 된거든요. 오히려 공유하면, 경우에 따라 **모든 사용자가 다른 사용자 홈 폴더에 접근하게 될 수도 있습니다!**

![공유 추가 완료]({{"/assets/images/2019-10-26/2019-10-26-01-04.png"| relative_url}})

사용할 공유 폴더를 모두 추가하고 나면 이렇게 목록을 확인할 수 있어요.

# 네트워크 드라이브 연결하기

![Windows 내 PC 컴퓨터 탭]({{"/assets/images/2019-10-26/2019-10-26-01-05.png"| relative_url}})

윈도우의 **내 PC**에 들어가면 상단 탭에 위와 같은 메뉴들이 있습니다. **네트워크 드라이브 연결**을 눌러 설정을 시작합니다.

![네트워크 드라이브 추가 화면]({{"/assets/images/2019-10-26/2019-10-26-01-06.png"| relative_url}})

적당한 드라이브 이름을 할당하고 폴더 경로를 입력합니다. 폴더 경로는 `\\호스트 이름\공유 폴더 이름` 과 같이 설정할 수 있어요. 또는 `\\나스 IP\공유 폴더 이름` 과 같이 설정해도 됩니다. **로그인할 때 다시 연결** 옵션을 선택하면 재부팅 후 자동으로 연결이 되고, 윈도우와 나스의 계정 정보가 다를 경우 (대부분 다를 겁니다.) **다른 자격 증명을 사용하여 연결**을 선택하여 계정 정보를 직접 입력하도록 합니다.

저는 호스트 이름을 **O**MV4 라고 지었으므로 **O** 드라이브를 할당하고, Contents 폴더를 연결할 예정이므로 `\\OMV4\Contents` 라고 경로를 입력했어요.

![네트워크 자격 증명 입력 화면]({{"/assets/images/2019-10-26/2019-10-26-01-07.png"| relative_url}})

그럼 이렇게 자격 증명을 입력하는 화면이 나오는데, OMV의 사용자 정보를 입력하면 됩니다.

정상적으로 입력이 완료되면 네트워크 드라이브가 연결된 후, 연결된 공유 폴더가 새 창으로 나오게 됩니다. 그럼 끝!

> **[NOTE]**
>
> 가끔 사용자 정보를 정상적으로 입력해도 계정 정보가 일치하지 않는다는 메시지와 함께 연결이 되지 않는 경우가 있습니다. 여기에는 다양한 원인이 있을 수 있으나, 정상적으로 구성하였는데도 그런 상황이 발생한다면, OMV 웹 패널의 **접근 권한 관리 > 사용자** 페이지에서 해당 사용자의 비밀번호를 다시 설정해 보세요. 그 후에 정상적으로 되는 경우가 종종 있었습니다.
>
> 아마도 리눅스 사용자 비밀번호가 SMB에 정상적으로 동기화되지 않는 문제인 것 같네요.
