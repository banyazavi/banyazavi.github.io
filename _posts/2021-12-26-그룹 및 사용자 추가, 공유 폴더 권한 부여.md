---
title: "[OMV6 on HC4] 그룹 및 사용자 추가, 공유 폴더 권한 부여"
excerpt: 사용자를 만들어 권한을 관리하세요. 그러나 사용자는 너무 많아질 수 있으니 그룹에 권한을 부여하는 것이 효과적입니다.
categories:
  - OMV6 on HC4
sidebar:
  - nav: omv6_nas
tags:
  - NAS
  - OMV6
  - openmediavault
---

이번 글 역시 [**OMV4 그룹 및 사용자 추가, 공유 폴더 권한 부여**](/2019-10-13/그룹-및-사용자-추가,-공유-폴더-권한-부여)와 진행이 다르지 않습니다. 그러나 OMV6의 UI가 상당히 바뀌었으니 다시 정리할 필요는 있겠죠.

---

# 사용자 그룹 계획 세우기

사용자에게 직접 권한을 줄 수도 있습니다. 하지만 사용자가 추가될 일을 생각보다 잦은데, 그때마다 권한을 일일이 넣어주는 것은 꽤 귀찮을 수도 있어요. 그래서 보통은 사용자들을 **그룹**에 소속시키고, 여기에 권한을 부여하여 사용하게 됩니다.

저는 아래와 같이 3개의 그룹을 만들어 권한을 줄 거예요.

- 관리자 그룹 (Administrators). 공유 폴더 `data`와 `archive` 모두에 대한 읽기/쓰기 권한을 가집니다.
- 사용자 그룹 (Members). `data`는 읽기/쓰기 모두 가능하지만, `archive`는 읽기만 허용할 거예요.
- 손님 그룹 (Guests). `data`에 대한 읽기만 할 수 있고, `archive`는 아예 접근조차 할 수 없어요.

그룹 설정을 상황에 따라 다양하게 할 수 있습니다. 회사에서 사용하는 경우 조직별로 그룹을 만든 뒤, 조직마다 독자적으로 접근 가능한 공유 폴더를 설정한다든지 할 수도 있어요.

# 그룹 추가

![User Management > 그룹]({{"/assets/images/2021-12-26/2021-12-26-01-01.png"| relative_url}})

**User Management > 그룹** 메뉴에서 그룹을 추가할 수 있습니다. 이 시리즈를 따라왔다면, 최초 사용자와 같은 이름의 그룹이 하나 생성되어 있을 거예요. 이것은 그대로 두고, 아까 말한 새 그룹을 생성합니다.

![관리자 그룹 생성]({{"/assets/images/2021-12-26/2021-12-26-01-02.png"| relative_url}})

관리자 그룹을 추가합니다. 최초 사용자를 관리자로 사용할 것이니 이 단계에서 구성원에 추가합니다.

![사용자 그룹 생성]({{"/assets/images/2021-12-26/2021-12-26-01-03.png"| relative_url}})

사용자 그룹을 추가합니다. 최초 사용자 외에는 아직 사용자를 만들지 않았죠. 그래서 현재 단계에서 구성원을 추가하지는 않습니다.

![손님 그룹 생성]({{"/assets/images/2021-12-26/2021-12-26-01-04.png"| relative_url}})

손님 그룹도 이렇게 추가합니다. 현재까지는 사용자 그룹 추가와 차이점이 없네요.

![User Management > 그룹 (그룹 생성 후)]({{"/assets/images/2021-12-26/2021-12-26-01-05.png"| relative_url}})

그러면 이런 식으로 최초 그룹과 우리가 추가한 3개의 그룹이 생기게 됩니다.

# 사용자 추가

![User Management > 사용자]({{"/assets/images/2021-12-26/2021-12-26-01-06.png"| relative_url}})

사용자는 **User Management > 사용자** 메뉴에서 추가할 수 있습니다. 현재는 최초 사용자만 등록되어 있죠.

생성 버튼을 눌러 사용자 한 명과 손님 한 명을 만들어 봅시다.

![member_a 사용자 생성]({{"/assets/images/2021-12-26/2021-12-26-01-07.png"| relative_url}})

`member_a`라는 사용자 계정을 추가합니다. 이름과 암호, 암호 확인을 넣고. 그룹 속성에서 `Members` 그룹을 찾아 선택해야 하는데요... `구성원`이라고 자동 번역이 되어 있네요. ~~여러분은 이 이름으로 그룹 만들지 마세요~~ 잠시 뇌 정지가 왔으나 진정하고, 이 그룹을 선택합니다.

![guest_b 사용자 생성]({{"/assets/images/2021-12-26/2021-12-26-01-08.png"| relative_url}})

`guest_b`라는 손님 계정을 추가합니다. `member_a`와 똑같은데 그룹만 `Guests`를 선택해 주면 되겠죠.

![User Management > 사용자 (사용자 생성 후)]({{"/assets/images/2021-12-26/2021-12-26-01-09.png"| relative_url}})

이렇게 사용자를 만들고 나면 사용자 목록이 이렇게 보일 거예요. `member_a`의 그룹은 다행히 `Members`로 잘 등록되었네요. `users` 그룹은 사용자 계정에 대해 리눅스가 자동으로 등록해주는 그룹으로, 크게 신경 쓰지 않아도 됩니다.

# 공유 폴더의 접근 권한 관리

![저장소 > 공유 폴더]({{"/assets/images/2021-12-26/2021-12-26-01-10.png"| relative_url}})

**저장소 > 공유 폴더** 메뉴에서 공유 폴더 대한 그룹 권한을 부여해 봅시다.

사용자와 그룹에 부여되는 권한은 **권한**과 **Access control list (접근 제어 목록)** 두 가지가 있는데,

- **권한**: 해당 공유 폴더가 서비스의 최상위 폴더로 노출되는 것에 대한 설정
- **Access control list (접근 제어 목록)**: 실제 파일/폴더에 적용된 접근 권한

이라고 설명할 수 있습니다.

## 권한 설정

`data` 공유 폴더에 권한을 부여해 봅시다. `data` 공유 폴더를 선택하고 상단의 **권한** 버튼을 눌러 권한 설정 메뉴로 들어갑니다.

![data 공유 폴더 권한]({{"/assets/images/2021-12-26/2021-12-26-01-11.png"| relative_url}})

`data` 공유 폴더는 `Administrators`와 `Members` 그룹에 대해서는 읽기/쓰기를, `Guests` 그룹에는 읽기만 허용하기로 했으니 이렇게 설정하면 됩니다.

![archive 공유 폴더 권한]({{"/assets/images/2021-12-26/2021-12-26-01-12.png"| relative_url}})

`archive` 공유 폴더는 모든 그룹에 대해서 다른 권한을 주려고 했으니 이렇게 설정하면 되겠죠.

## Access control list 설정

이번엔 접근 제어 목록을 수정하도록 할게요. **권한** 버튼 옆의 **Access control list** 버튼을 눌러 설정 메뉴로 들어갈 수 있습니다.

![data 공유 폴더 접근 제어 목록]({{"/assets/images/2021-12-26/2021-12-26-01-13.png"| relative_url}})

`data` 공유 폴더의 접근 제어 목록 설정이에요. `Members` 그룹에 대한 권한도 **Read/Write**로 선택하였는데, 페이지가 넘어가서 스크린샷에서는 보이지 않네요. 기본적으로 **권한** 때와 똑같이 선택하면 크게 헷갈릴 일이 없습니다. 

하단의 **재귀적으로** 옵션을 눈여겨볼 필요가 있습니다. 이 옵션을 선택하면 해당 폴더의 하위 파일과 폴더에도 같은 접근 제어 권한이 적용됩니다. 하위 폴더에 무엇이 있는지 잘 고민하고 선택하면 됩니다.

![archive 공유 폴더 접근 제어 목록]({{"/assets/images/2021-12-26/2021-12-26-01-14.png"| relative_url}})

`archive` 공유 폴더 또한 **권한**에서의 읽기/쓰기 설정과 똑같이 설정하도록 할게요.

---

# 그리고 남은 이야기

그룹과 사용 권한을 잘 설정한다면 매우 다채롭게 나스를 운영할 수 있습니다. 그룹별로 전용 공유 폴더를 할당한다거나, 특정 폴더는 보이긴 하지만 들어가 볼 수 없다거나, 어떤 폴더는 특정 그룹만 쓸 수 있고, 다른 그룹은 읽을 수만 있다거나 등... 하지만 그런 시나리오를 상정하여 설명하기는 글이 쓸데없이 복잡해지므로 가장 간단한 상황을 안내하게 되었어요.
