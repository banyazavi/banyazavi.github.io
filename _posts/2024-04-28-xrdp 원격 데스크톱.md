---
title: "[Ubuntu 24.04 LTS] xrdp 원격 데스크톱"
excerpt: Xfce에서 GNOME 2로 바뀌었지만, xrdp 설치와 사용법은 전혀 바뀌지 않았어요.
categories:
  - 우분투 24.04 LTS
sidebar:
  - nav: ubuntu_24_04_lts
tags:
  - GNOME 2
  - Linux
  - mstsc
  - RDP
  - Ubuntu
  - Ubuntu Desktop
  - xrdp
---

> **[NOTE]**  
> **xrdp**가 무슨 서비스인지 궁금하세요?
> 그렇다면 [**이전 시리즈의 글**](/2022-06-11/xrdp-원격-데스크톱)을 확인하세요!

2년 전과 비교하여 RDP를 통한 원격 세션 접속에 달라진 점은, 우리의 데스크톱 환경이 Xfce 기반의 Zorin에서 GNOME 2 기반의 MATE로 바뀌었다는 것 밖에 없습니다. 그리고 우분투 24가 되면서 생기는 것이 하나 있는데요, 이건 남은 이야기에서 알려 드리도록 할게요.

따라서 이번 글도 **Linuxize**의 [**우분투 20.04에 xrdp 설치하는 법**](https://linuxize.com/post/how-to-install-xrdp-on-ubuntu-20-04/){: target="_blank"}을 충실히 따라갑니다. 우리가 MATE 데스크톱을 사용한다는 점만 제외하고요.

---

# xrdp 설치

## (Optional) MATE Desktop 설치

```
$ sudo apt update
$ sudo apt install mate-desktop
```

우리는 우분투 마테를 설치했기 때문에 필요가 없지만, 혹시 xrdp가 지원되지 않는 데스크톱 환경이나 서버 버전을 설치하였다면 **데스크톱 그래픽 환경** 설치가 필요해요. Linuxize의 가이드는 **Ubuntu Desktop**이나 **Xubuntu Desktop**를 설치하라고 되어 있지만, 우리는 GNOME 2 기반의 **MATE Desktop**을 설치해 봅시다.

하지만 한 PC에 두 개 이상의 데스크톱 환경이 설치되어 있으면 작업할 때 헷갈리가 딱 좋아서요, 저는 가능한 **xrdp가 지원되는 데스크톱 환경의 배포판을 사용**하는 것을 권장합니다. 그리고 **Ubuntu MATE**가 딱 그런 배포판이에요!

## xrdp 설치

```
$ sudo apt update
$ sudo apt install xrdp
$ sudo systemctl status xrdp
```

**xrdp**를 설치합니다. 설치 후에 `sudo systemctl status xrdp` 명령으로 xrdp의 동작 상태를 확인해 볼 수 있어요.

## xrdp에 SSL 인증서 접근 권한 추가

```
$ sudo adduser xrdp ssl-cert
```

`xrdp` 계정을 `ssl-cert` 그룹에 추가하여 SSL 인증서 접근 권한을 부여해 줍니다. 그렇지 않으면 원격 데스크톱 연결 시에 관련된 경고 메시지가 한번 뜨게 될 거에요.

## xrdp 재시작

```
$ sudo systemctl restart xrdp
```

설정을 적용하기 위해 xrdp를 재시작합니다. 또는 이 참에 리눅스를 재부팅하는 것도 좋아요.

# 설치 확인

이제 윈도우 PC의 **원격 데스크톱 연결 도구**를 통해 리눅스에 접속해 봅시다. 원격 접속에 사용할 윈도우 PC는 리눅스와 같은 네트워크 상에 있어야 해요.

## 주의!

RDP는 **원격 세션** 전달 방식으로 PC에 접속합니다. 따라서 xrdp로 리눅스에 원격 접속을 하기 위해서는 로컬 환경의 세션이 사용 중이지 않아야 해요. 리눅스 재부팅 후 로그온하지 않거나, 현재 세션에서 로그아웃하여 사용 중인 세션을 모두 닫아 주세요. 그렇지 않고 원격 접속을 시도하면 원격 세션이 정상 동작하지 않거나, 접속 직후 튕길 수도 있어요!

## 원격 데스크톱 연결

자, 이제 윈도우에서 **원격 데스크톱 연결** 앱을 찾아 실행해 봅시다.

![원격 데스크톱 연결]({{"/assets/images/2024-04-28/2024-04-28-01-01.png"| relative_url}})

리눅스 PC의 IP를 입력하고 연결을 누르면, 아래와 같은 경고가 발생할 거예요.

![원격 컴퓨터 ID 확인 경고 (인증서 오류)]({{"/assets/images/2024-04-28/2024-04-28-01-02.png"| relative_url}})

자가 서명 인증서 문제로 경고가 발생하는데요. 이것은 어쩔 수 없으니 무시하고 **예**를 눌러서 접속합니다.

![xrdp 로그인]({{"/assets/images/2024-04-28/2024-04-28-01-03.png"| relative_url}})

그럼 이렇게 xrdp의 로그인 화면이 나오게 되고, 여기에 리눅스의 계정 정보를 입력하여 원격 데스크톱을 통해 리눅스에 접속할 수 있게 됩니다!

---

# 그리고 남은 이야기

## 한글 입력이 안 된다?!

즐거운 마음으로 원격 사용해 보려고 했는데, 한글 입력이 되지 않는 경우가 있죠? 로컬 세션과 원격 세션의 키보드 구성 정보가 공유되지 않기 때문이에요.

[**Nimf 설치 글의 키보드 레이아웃 설정**](/2024-04-08/Nimf-한글-입력기-프레임워크#키보드-레이아웃-확인) 부분을 기억하실 거예요. 원격 세션에서는 이 부분 설정이 **영어**로 되어 있을 가능성이 높은데요, 이것 또한 **한국어 Korean (101/104-key compatible)** 으로 변경하면 아마 잘 될 거예요.

## Ubuntu Desktop 공식 지원?

우분투 데스크톱의 시스템 설정에서 다음과 같은 항목을 발견했어요.

![Ubuntu Desktop - 원격 로그인]({{"/assets/images/2024-04-28/2024-04-28-01-04.png"| relative_url}})

**원격 로그인**이라는 항목이 생겼는데요. 기존에는 **데스크톱 공유** 밖에 없었고, 이 기능은 우리가 원하던 것은 아니었거든요. 그래서 이 기능이 세션 방식의 원격 접속이 아닐까 생각이 됩니다.

하지만 24.04 베타에서는 이 기능으로 정상적인 원격 데스크톱 접속을 할 수 없었어요... 정식 출시 후에 다시 확인해 보도록 할게요.
